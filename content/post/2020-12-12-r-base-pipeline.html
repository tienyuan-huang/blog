---
title: R baseçš„å…§å»ºpipeline
author: é»ƒå¤©åŸ
date: '2020-12-12'
slug: r-base-pipeline
categories:
  - programming
tags:
  - R
  - ä¹¾è²¨
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>ä»Šå¤©æ„å¤–çœ‹åˆ°R core teamä¹Ÿæœ‰åœ¨é–‹ç™¼å®ƒå€‘è‡ªå·±å…§å»ºçš„pipelineï¼Œåš‡å¾—æˆ‘è¶•ç·Šä¸‹è¼‰äº†Rçš„devç‰ˆæœ¬ã€‚R baseç‰ˆæœ¬çš„pipelineï¼Œé•·æˆ<code>|&gt;</code>é€™é™„æ¨¡æ¨£ï¼Œå¯ä»¥çœ‹åˆ°åƒä¸‹é¢é‚£ç¯‡twitterçš„ä¾‹å­ã€‚[^add html]</p>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
<a href="https://twitter.com/hashtag/RStats?src=hash&amp;ref_src=twsrc%5Etfw">#RStats</a> community, really? It's been like 5 hours now and no one noticed the big news? ğŸ˜›<a href="https://t.co/c4OXTO0WCw">https://t.co/c4OXTO0WCw</a><br><br>Thank you <a href="https://twitter.com/LukeTierney4?ref_src=twsrc%5Etfw"><span class="citation">@LukeTierney4</span></a> <a href="https://twitter.com/_lionelhenry?ref_src=twsrc%5Etfw"><span class="citation">@_lionelhenry</span></a> <a href="https://twitter.com/jimhester_?ref_src=twsrc%5Etfw"><span class="citation">@jimhester_</span></a> (who else?)<a href="https://twitter.com/hashtag/pipypipy?src=hash&amp;ref_src=twsrc%5Etfw">#pipypipy</a> <a href="https://t.co/5P9QPe1H8a">pic.twitter.com/5P9QPe1H8a</a>
</p>
â€” Henrik Bengtsson (<span class="citation">@henrikbengtsson</span>) <a href="https://twitter.com/henrikbengtsson/status/1334703130378788866?ref_src=twsrc%5Etfw">December 4, 2020</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>è£å¥½R-devç‰ˆæœ¬ä¹‹å¾Œï¼Œæˆ‘å¾ˆå¿«çš„æ‰¾äº†é—œæ–¼<code>|&gt;</code>çš„help documentä¾†çœ‹çœ‹ã€‚
<img src="/img/R-pipe-doc.png" alt="R-pipeline-help" />
<img src="/img/R-pipe-ex.png" alt="R-pipeline-example" />
æ–‡æª”å¤§è‡´ä¸Šé•·å¾—å¦‚æ­¤ï¼Œé€™å€‹å…§å»ºpipeçš„æ–¹æ³•ï¼Œå°±è·Ÿç†Ÿæ‚‰çš„<code>%&gt;%</code>ä¸€æ¨£ï¼Œä¾‹å¦‚ï¼š</p>
<pre class="r"><code>&gt; mtcars |&gt; subset(cyl == 4) |&gt; subset(select = mpg)
&gt; 
                mpg
Datsun 710     22.8
Merc 240D      24.4
Merc 230       22.8
Fiat 128       32.4
Honda Civic    30.4
Toyota Corolla 33.9
Toyota Corona  21.5
Fiat X1-9      27.3
Porsche 914-2  26.0
Lotus Europa   30.4
Volvo 142E     21.4</code></pre>
<p>å°±å¯ä»¥å¾—åˆ°é¸å‡ºä¾†çš„çµæœï¼Œçœ‹çœ‹cylæ˜¯4çš„è»Šå­ï¼Œå®ƒçš„mpgæ˜¯å¤šå°‘ã€‚å…¶æ•ˆæœè·Ÿ<code>{dplyr}</code>çš„<code>filter()</code>ã€<code>select()</code>ä¸€æ¨£ï¼Œåªæ˜¯ç¾åœ¨å…¨éƒ¨éƒ½èƒ½ç”¨å…§å»ºçš„å‡½æ•¸å®Œæˆã€‚</p>
<p>å¦å¤–ï¼Œå®ƒä¹Ÿèƒ½è®“pipelineç›´æ¥é€²åˆ°functionè£¡é¢ï¼Œåƒæ˜¯ä¸‹é¢é€™æ¨£</p>
<pre class="r"><code>&gt; mtcars |&gt; subset(cyl == 4) |&gt; \(d) lm(mpg ~ disp, data = d)

Call:
lm(formula = mpg ~ disp, data = d)

Coefficients:
(Intercept)         disp  
    40.8720      -0.1351 </code></pre>
<p>æŠŠé¸å¥½çš„data.frameæ”¾é€²ä¸€å€‹å¯ä»¥ç”Ÿæˆmodelçš„functionè£¡é¢ï¼Œæ•ˆæœè·Ÿ
<code>mtcars |&gt; subset(cyl == 4) |&gt; function(d) lm(mpg ~ disp, data = d)</code></p>
<p>ä¸€æ¨£ã€‚</p>
<p>ç¸½çµä¾†èªªï¼ŒR core teamé–‹ç™¼é€™å€‹å…§å»ºçš„æ°´ç®¡ï¼ŒçœŸæ˜¯å€‹é…·æ±è¥¿ã€‚</p>
<p>[^add html]: å› ç‚ºåœ¨å…§åµŒhtmlçš„æ™‚å€™é‡åˆ°ä¸€äº›å›°é›£ï¼ŒHugoæœ‰å•é¡Œï¼Œæ‰€ä»¥é™„ä¸Šè§£æ±ºæ–¹æ¡ˆ<a href="https://stackoverflow.com/questions/63198652/hugo-shortcode-ignored-saying-raw-html-omitted" class="uri">https://stackoverflow.com/questions/63198652/hugo-shortcode-ignored-saying-raw-html-omitted</a></p>
